# StatMate External Services Setup Guide

> Last updated: 2026-02-20
>
> This guide covers every external service that StatMate depends on.
> All code is already written -- only service configuration and environment variables remain.

---

## Table of Contents

1. [Custom Domain Setup](#1-custom-domain-setup)
2. [Supabase Setup (Auth + Database)](#2-supabase-setup)
3. [Lemon Squeezy Setup (Payments)](#3-lemon-squeezy-setup)
4. [Anthropic API Setup (AI Interpretation)](#4-anthropic-api-setup)
5. [Google Analytics Setup](#5-google-analytics-setup)
6. [Google AdSense Setup](#6-google-adsense-setup)
7. [Google Search Console Indexing](#7-google-search-console-indexing)
8. [Environment Variables Reference](#8-environment-variables-reference)
9. [Quick Start Checklist](#9-quick-start-checklist)

---

## 1. Custom Domain Setup

### Option A: Buy a dedicated domain (Recommended)

**Recommended domains:** `statmate.app`, `statmate.io`, `statmate.co`

**Recommended registrars:**
- [Cloudflare Registrar](https://dash.cloudflare.com/) -- at-cost pricing, free DNS
- [Namecheap](https://www.namecheap.com/) -- affordable, includes free WhoisGuard
- [Google Domains](https://domains.google/) -- simple, integrates with Google services

**Expected cost:** $10--15/year for `.app` or `.io`

**Steps:**

1. Purchase the domain from one of the registrars above.
2. Go to the [Vercel Dashboard](https://vercel.com/dashboard) and select the **statmate** project.
3. Navigate to **Settings > Domains**.
4. Click **Add Domain** and enter your purchased domain (e.g., `statmate.app`).
5. Vercel will display DNS records to configure. Typically:
   - **A record:** `76.76.21.21` (for root domain)
   - **CNAME record:** `cname.vercel-dns.com` (for `www` subdomain)
6. Go to your registrar's DNS settings and add the records shown by Vercel.
7. Wait for DNS propagation (usually 5--30 minutes, sometimes up to 48 hours).
8. Vercel will automatically provision an SSL certificate once DNS resolves.
9. **Update all URL references in the codebase** (see list below).

### Option B: Subdomain (e.g., `stats.yourdomain.com`)

Follow the same Vercel steps above, but add a single **CNAME record** instead:
- **Host:** `stats` (or your chosen subdomain)
- **Value:** `cname.vercel-dns.com`

### Files to Update After Domain Change

Replace every occurrence of `statmate-red.vercel.app` with your new domain.

**Source code files (10 files):**

| File | Line | What to change |
|------|------|----------------|
| `app/[locale]/layout.tsx` | 29 | `const BASE_URL = "https://statmate-red.vercel.app"` |
| `app/sitemap.ts` | 4 | `const BASE_URL = "https://statmate-red.vercel.app"` |
| `app/robots.ts` | 3 | `const BASE_URL = "https://statmate-red.vercel.app"` |
| `app/[locale]/page.tsx` | 17 | `url: "https://statmate-red.vercel.app"` in JSON-LD |
| `components/breadcrumb-schema.tsx` | 1 | `const BASE_URL = "https://statmate-red.vercel.app"` |
| `lib/export-pdf.ts` | 97 | `"Generated by StatMate (statmate-red.vercel.app)"` |
| `app/[locale]/privacy/page.tsx` | 35 | Reference to `statmate-red.vercel.app` |
| `app/[locale]/terms/page.tsx` | 32 | Reference to `statmate-red.vercel.app` |
| `app/[locale]/validation/page.tsx` | 351 | Citation URL |
| `public/robots.txt` | 4 | `Sitemap: https://statmate-red.vercel.app/sitemap.xml` |

**Translation files (3 files) -- citation URLs:**

| File | Lines | What to change |
|------|-------|----------------|
| `messages/en.json` | 691, 695, 699 | Citation URLs in About page |
| `messages/ko.json` | 691, 695, 699 | Citation URLs in About page |
| `messages/ja.json` | 691, 695, 699 | Citation URLs in About page |

**Tip:** Use a global find-and-replace across the project:
```
Find:    statmate-red.vercel.app
Replace: YOUR_NEW_DOMAIN.com
```

After updating, redeploy to Vercel.

---

## 2. Supabase Setup

Supabase provides authentication (email + Google OAuth) and a PostgreSQL database for analysis history. The app gracefully degrades when Supabase is not configured -- auth and history UI are automatically hidden.

### Step 1: Create a Supabase Project

1. Go to [https://supabase.com](https://supabase.com) and sign in (or create an account).
2. Click **New Project**.
3. Choose an organization (or create one).
4. Fill in project details:
   - **Name:** `statmate` (or `statmate-prod`)
   - **Database Password:** Generate a strong password and save it securely.
   - **Region:** `ap-northeast-2` (Seoul) for Korean users, or choose the closest region to your target audience.
5. Click **Create new project** and wait for provisioning (1--2 minutes).

### Step 2: Get API Credentials

1. In your Supabase project dashboard, go to **Settings > API**.
2. Copy these two values:
   - **Project URL** (looks like `https://xxxxxxxxxxxx.supabase.co`) -- this becomes `NEXT_PUBLIC_SUPABASE_URL`
   - **anon / public key** (starts with `eyJ...`) -- this becomes `NEXT_PUBLIC_SUPABASE_ANON_KEY`

### Step 3: Run the Database Schema

1. In the Supabase dashboard, go to **SQL Editor** (left sidebar).
2. Click **New query**.
3. Paste the following SQL and click **Run**:

```sql
-- StatMate: Analysis History Table
-- Source: lib/supabase/schema.sql

CREATE TABLE analysis_history (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id) ON DELETE CASCADE NOT NULL,
  calculator_type TEXT NOT NULL,
  input_data JSONB NOT NULL,
  result_data JSONB NOT NULL,
  title TEXT,
  created_at TIMESTAMPTZ DEFAULT now() NOT NULL
);

CREATE INDEX idx_history_user ON analysis_history(user_id, created_at DESC);

-- Row Level Security
ALTER TABLE analysis_history ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own history"
  ON analysis_history FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own history"
  ON analysis_history FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Users can delete own history"
  ON analysis_history FOR DELETE
  USING (auth.uid() = user_id);
```

4. Verify success: you should see "Success. No rows returned" with no errors.

### Step 4: Enable Authentication Providers

#### Email/Password (Required)

1. Go to **Authentication > Providers** in the Supabase dashboard.
2. **Email** should be enabled by default. Verify it is on.
3. Recommended settings:
   - **Enable email confirmations:** On (for production)
   - **Enable double opt-in:** Off (simpler UX)

#### Google OAuth (Optional but Recommended)

1. Go to [Google Cloud Console](https://console.cloud.google.com/).
2. Create a new project (or use an existing one).
3. Go to **APIs & Services > Credentials**.
4. Click **Create Credentials > OAuth 2.0 Client ID**.
5. Choose **Web application**.
6. Set the **Authorized redirect URI** to:
   ```
   https://YOUR_PROJECT_ID.supabase.co/auth/v1/callback
   ```
   (Replace `YOUR_PROJECT_ID` with your actual Supabase project reference ID, visible in your project URL.)
7. Copy the **Client ID** and **Client Secret**.
8. Back in Supabase, go to **Authentication > Providers > Google**.
9. Toggle it **On** and paste the Client ID and Client Secret.
10. Click **Save**.

### Step 5: Configure Site URL

1. In Supabase, go to **Authentication > URL Configuration**.
2. Set **Site URL** to your production domain:
   ```
   https://YOUR_DOMAIN.com
   ```
   (or `https://statmate-red.vercel.app` if you have not set up a custom domain yet)
3. Add **Redirect URLs** (one per line):
   ```
   https://YOUR_DOMAIN.com/**
   http://localhost:3000/**
   ```

### Step 6: Set Environment Variables

See [Section 8](#8-environment-variables-reference) for the complete list. The Supabase-specific variables are:

```env
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGci...your_anon_key_here
```

---

## 3. Lemon Squeezy Setup

Lemon Squeezy handles Pro license purchases, activation, and verification. The current codebase uses license key validation (not webhooks) via the `/api/activate` and `/api/verify` routes.

### Step 1: Create a Lemon Squeezy Account

1. Go to [https://www.lemonsqueezy.com](https://www.lemonsqueezy.com) and sign up.
2. Complete the onboarding process (business info, payout details).

### Step 2: Create a Store

1. In the Lemon Squeezy dashboard, go to **Settings > Store**.
2. Store name: `StatMate` (this affects the subdomain: `statmate.lemonsqueezy.com`).
3. Fill in store details (logo, description, etc.).

### Step 3: Create Products

Create the following products in **Store > Products > New Product**:

#### Product 1: Pro Monthly Subscription

| Field | Value |
|-------|-------|
| **Name** | StatMate Pro Monthly |
| **Description** | Unlock AI interpretation, Word export, ad-free experience, and analysis history. |
| **Pricing** | $9.99 / month |
| **Type** | Subscription -- Monthly |
| **License keys** | Enable -- Generate a license key on purchase |
| **Activation limit** | 3 (allow activation on multiple devices) |

After creation, click on the product and copy the **Checkout URL** from the Share tab.

#### Product 2: Pro Annual Subscription

| Field | Value |
|-------|-------|
| **Name** | StatMate Pro Annual |
| **Description** | Save 20% -- all Pro features for a full year. |
| **Pricing** | $95.88 / year ($7.99/month equivalent) |
| **Type** | Subscription -- Yearly |
| **License keys** | Enable -- Generate a license key on purchase |
| **Activation limit** | 3 |

#### Product 3: Single Export (Pay-per-use)

| Field | Value |
|-------|-------|
| **Name** | StatMate Single Export |
| **Description** | One-time APA Word document export. |
| **Pricing** | $2.99 |
| **Type** | One-time payment |

#### Product 4: Expert Review

| Field | Value |
|-------|-------|
| **Name** | StatMate Expert Review |
| **Description** | Professional statistical analysis review by an expert. |
| **Pricing** | 49,000 KRW (approximately $37 USD) |
| **Type** | One-time payment |

### Step 4: Get API Key

1. Go to **Settings > API** in the Lemon Squeezy dashboard.
2. Click **Create API Key** (or **+** button).
3. Name it `statmate-production`.
4. Copy the API key immediately -- it will only be shown once.
5. This becomes the `LEMONSQUEEZY_API_KEY` environment variable.

### Step 5: Update Checkout URL in Code

The checkout URL is currently hardcoded in `app/[locale]/pricing/page.tsx` at line 28:

```typescript
const CHECKOUT_URL =
  "https://statmate.lemonsqueezy.com/checkout/buy/27f3051f-83fd-4dbc-858d-f813a7f15cb1";
```

Replace this with the actual checkout URL from the Pro Monthly product you created. To get the URL:

1. Go to **Store > Products** in Lemon Squeezy.
2. Click on the Pro Monthly product.
3. Go to the **Share** tab.
4. Copy the **Checkout URL**.

### Step 6: Set Up Webhooks (Optional, for future use)

The current codebase validates licenses via direct API calls (no webhook endpoint yet). If you add a webhook endpoint in the future:

1. Go to **Settings > Webhooks** in Lemon Squeezy.
2. Click **Add Webhook**.
3. **Callback URL:** `https://YOUR_DOMAIN/api/webhook/lemonsqueezy`
4. **Signing secret:** Generate and save as `LEMON_SQUEEZY_WEBHOOK_SECRET`.
5. **Events to listen for:**
   - `order_created`
   - `subscription_created`
   - `subscription_updated`
   - `license_key_created`

### Step 7: Set Environment Variables

```env
LEMONSQUEEZY_API_KEY=your_lemon_squeezy_api_key_here
```

---

## 4. Anthropic API Setup

The AI Interpretation feature (Pro-only) uses the Anthropic API to generate plain-language explanations of statistical results.

### Step 1: Get an API Key

1. Go to [https://console.anthropic.com](https://console.anthropic.com) and sign in (or create an account).
2. Go to **Settings > API Keys**.
3. Click **Create Key**.
4. Name it `statmate-production`.
5. Copy the key immediately and store it securely.

### Step 2: Set Environment Variables

```env
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929
```

The `ANTHROPIC_MODEL` variable is optional. If not set, it defaults to `claude-sonnet-4-5-20250929` (as configured in `app/api/interpret/route.ts`).

### Step 3: Monitor Usage

- Check usage at [https://console.anthropic.com/settings/usage](https://console.anthropic.com/settings/usage).
- Set billing limits to avoid unexpected charges.
- The interpret endpoint has built-in rate limiting (10 requests/minute per IP).

---

## 5. Google Analytics Setup

Google Analytics (GA4) is used for tracking user behavior and A/B test results.

### Step 1: Create a GA4 Property

1. Go to [https://analytics.google.com](https://analytics.google.com).
2. Click **Admin** (gear icon) > **Create Property**.
3. Enter property name: `StatMate`.
4. Select your business details and time zone.
5. Click **Create** and choose **Web** as the platform.
6. Enter your website URL and stream name.
7. Copy the **Measurement ID** (looks like `G-XXXXXXXXXX`).

### Step 2: Set Environment Variable

```env
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX
```

The GA script in `components/google-analytics.tsx` will only load when this variable is set.

---

## 6. Google AdSense Setup

AdSense displays ads to free-tier users (automatically hidden for Pro users).

### Step 1: Apply for AdSense

1. Go to [https://www.google.com/adsense](https://www.google.com/adsense).
2. Sign in with your Google account.
3. Add your site URL.
4. AdSense will review your site. Requirements already met:
   - Original content: 25+ blog posts, 20 calculators
   - Privacy policy: `/privacy`
   - Terms of service: `/terms`
5. Review typically takes 1--14 days.

### Step 2: Get Publisher ID

1. Once approved, go to **Account > Account information**.
2. Copy your **Publisher ID** (looks like `ca-pub-1234567890123456`).

### Step 3: Create Ad Units

1. Go to **Ads > By ad unit > Create new ad unit**.
2. Create ad units for different placements (e.g., in-article, sidebar).
3. Note each ad unit's **slot ID** for use in `<AdUnit slot="..." />` components.

### Step 4: Set Environment Variable

```env
NEXT_PUBLIC_ADSENSE_ID=ca-pub-1234567890123456
```

The AdSense script in `components/adsense.tsx` will only load when this variable is set.

---

## 7. Google Search Console Indexing

### Step 1: Add Your Property

1. Go to [https://search.google.com/search-console](https://search.google.com/search-console).
2. Click **Add property**.
3. Choose **URL prefix** and enter `https://YOUR_DOMAIN` (or `https://statmate-red.vercel.app`).
4. Verify ownership. Options:
   - **HTML meta tag** (already supported in `layout.tsx` metadata)
   - **DNS TXT record** (recommended if using a custom domain)

### Step 2: Submit Sitemap

1. Go to **Sitemaps** in the left sidebar.
2. Enter `sitemap.xml` in the input field.
3. Click **Submit**.
4. Verify it shows as "Success" with the expected number of URLs.

The sitemap at `app/sitemap.ts` automatically includes all locales (en, ko, ja) with:
- 20 calculator pages
- Blog posts
- Static pages (wizard, pricing, about, compare, etc.)
- Tools (SPSS to APA)
- Expert review and university pages

### Step 3: Request Indexing for Key Pages

Go to **URL Inspection** and submit each of these high-priority URLs for indexing:

**Homepage (3 locales):**
```
https://YOUR_DOMAIN/
https://YOUR_DOMAIN/ko
https://YOUR_DOMAIN/ja
```

**Calculator pages (20 pages x 3 locales = 60 URLs):**
```
https://YOUR_DOMAIN/calculators/t-test
https://YOUR_DOMAIN/calculators/anova
https://YOUR_DOMAIN/calculators/chi-square
https://YOUR_DOMAIN/calculators/correlation
https://YOUR_DOMAIN/calculators/descriptive
https://YOUR_DOMAIN/calculators/sample-size
https://YOUR_DOMAIN/calculators/one-sample-t
https://YOUR_DOMAIN/calculators/mann-whitney
https://YOUR_DOMAIN/calculators/wilcoxon
https://YOUR_DOMAIN/calculators/regression
https://YOUR_DOMAIN/calculators/multiple-regression
https://YOUR_DOMAIN/calculators/cronbach-alpha
https://YOUR_DOMAIN/calculators/logistic-regression
https://YOUR_DOMAIN/calculators/factor-analysis
https://YOUR_DOMAIN/calculators/kruskal-wallis
https://YOUR_DOMAIN/calculators/repeated-measures
https://YOUR_DOMAIN/calculators/two-way-anova
https://YOUR_DOMAIN/calculators/friedman
https://YOUR_DOMAIN/calculators/fisher-exact
https://YOUR_DOMAIN/calculators/mcnemar
```

(Repeat with `/ko/calculators/...` and `/ja/calculators/...` prefixes.)

**Key static pages:**
```
https://YOUR_DOMAIN/pricing
https://YOUR_DOMAIN/wizard
https://YOUR_DOMAIN/compare
https://YOUR_DOMAIN/blog
https://YOUR_DOMAIN/tools/spss-to-apa
https://YOUR_DOMAIN/expert-review
https://YOUR_DOMAIN/university
https://YOUR_DOMAIN/about
```

### Step 4: Monitor Indexing

- Check back daily for the first week.
- Go to **Pages** in GSC to see how many pages are indexed vs. excluded.
- Use **URL Inspection** for any pages that fail to index.
- Common issues: pages may show as "Discovered - currently not indexed" initially. This usually resolves within 1--2 weeks.

---

## 8. Environment Variables Reference

### All Environment Variables

Set these in **Vercel Dashboard > Project Settings > Environment Variables** for production, and in `.env.local` for local development.

| Variable | Required | Description | Example |
|----------|----------|-------------|---------|
| `NEXT_PUBLIC_SUPABASE_URL` | Optional* | Supabase project URL | `https://xxxx.supabase.co` |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | Optional* | Supabase public/anon key | `eyJhbGci...` |
| `LEMONSQUEEZY_API_KEY` | Optional* | Lemon Squeezy API key for license validation | `lsq_live_xxxx` |
| `ANTHROPIC_API_KEY` | Optional* | Anthropic API key for AI interpretation | *(copy from console)* |
| `ANTHROPIC_MODEL` | Optional | Claude model ID (default: `claude-sonnet-4-5-20250929`) | `claude-sonnet-4-5-20250929` |
| `NEXT_PUBLIC_GA_MEASUREMENT_ID` | Optional | Google Analytics 4 Measurement ID | `G-XXXXXXXXXX` |
| `NEXT_PUBLIC_ADSENSE_ID` | Optional | Google AdSense Publisher ID | `ca-pub-xxxxxxxxxxxx` |

*These are "optional" in that the app runs without them -- features gracefully degrade:
- Without Supabase vars: Auth UI and history panel are hidden.
- Without Lemon Squeezy key: License activation returns a 503 error.
- Without Anthropic key: AI interpretation returns a 503 error.
- Without GA/AdSense IDs: Scripts simply do not load.

### Setting Variables in Vercel

1. Go to [Vercel Dashboard](https://vercel.com/dashboard) and select the **statmate** project.
2. Go to **Settings > Environment Variables**.
3. For each variable:
   - Enter the **Key** (e.g., `NEXT_PUBLIC_SUPABASE_URL`).
   - Enter the **Value**.
   - Select environments: **Production**, **Preview**, and **Development** (or as needed).
   - Click **Save**.
4. **Redeploy** the project for changes to take effect:
   - Go to **Deployments** tab > click the three dots on the latest deployment > **Redeploy**.

### Creating `.env.local` for Local Development

Create a file at the project root named `.env.local`:

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxxxxxxxxxxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=paste_your_anon_key_here

# Lemon Squeezy
LEMONSQUEEZY_API_KEY=paste_your_api_key_here

# Anthropic (AI Interpretation)
ANTHROPIC_API_KEY=paste_your_anthropic_key_here

# Google Analytics (optional for local dev)
NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX

# Google AdSense (optional for local dev)
NEXT_PUBLIC_ADSENSE_ID=ca-pub-xxxxxxxxxxxx
```

**Important:** `.env.local` is already in `.gitignore`. Never commit this file.

---

## 9. Quick Start Checklist

### Phase 1: Domain (Day 1)

- [ ] Buy custom domain (e.g., `statmate.app`) -- ~$10--15/year
- [ ] Add domain in Vercel Dashboard > Settings > Domains
- [ ] Configure DNS records at your registrar (A record + CNAME)
- [ ] Wait for SSL certificate to provision (automatic)
- [ ] Find-and-replace `statmate-red.vercel.app` with your new domain across 13 files
- [ ] Commit and redeploy

### Phase 2: Supabase (Day 1)

- [ ] Create Supabase project at [supabase.com](https://supabase.com)
- [ ] Copy Project URL and anon key from Settings > API
- [ ] Run the SQL schema in SQL Editor (see Section 2, Step 3)
- [ ] Enable Email auth provider (should be on by default)
- [ ] (Optional) Set up Google OAuth provider
- [ ] Configure Site URL and Redirect URLs in Authentication > URL Configuration
- [ ] Add `NEXT_PUBLIC_SUPABASE_URL` to Vercel env vars
- [ ] Add `NEXT_PUBLIC_SUPABASE_ANON_KEY` to Vercel env vars
- [ ] Create `.env.local` with same variables for local dev
- [ ] Redeploy and test: sign up, sign in, save an analysis

### Phase 3: Lemon Squeezy (Day 1--2)

- [ ] Create Lemon Squeezy account at [lemonsqueezy.com](https://www.lemonsqueezy.com)
- [ ] Create store named "StatMate"
- [ ] Create Product 1: Pro Monthly ($9.99/mo subscription with license key)
- [ ] Create Product 2: Pro Annual ($95.88/yr subscription with license key)
- [ ] Create Product 3: Single Export ($2.99 one-time)
- [ ] Create Product 4: Expert Review (49,000 KRW one-time)
- [ ] Generate API key in Settings > API
- [ ] Update `CHECKOUT_URL` in `app/[locale]/pricing/page.tsx` line 28
- [ ] Add `LEMONSQUEEZY_API_KEY` to Vercel env vars
- [ ] Redeploy and test: purchase, activate license key, verify Pro access

### Phase 4: Anthropic API (Day 1)

- [ ] Get API key from [console.anthropic.com](https://console.anthropic.com)
- [ ] Set billing limits
- [ ] Add `ANTHROPIC_API_KEY` to Vercel env vars
- [ ] (Optional) Add `ANTHROPIC_MODEL` if you want a different model
- [ ] Redeploy and test: run a calculation, click AI Interpret (Pro only)

### Phase 5: Analytics and Ads (Day 2)

- [ ] Create GA4 property at [analytics.google.com](https://analytics.google.com)
- [ ] Add `NEXT_PUBLIC_GA_MEASUREMENT_ID` to Vercel env vars
- [ ] Apply for AdSense at [google.com/adsense](https://www.google.com/adsense)
- [ ] Once approved, add `NEXT_PUBLIC_ADSENSE_ID` to Vercel env vars
- [ ] Redeploy

### Phase 6: SEO Indexing (Day 2--3)

- [ ] Add property in [Google Search Console](https://search.google.com/search-console)
- [ ] Verify ownership (DNS TXT record or HTML meta tag)
- [ ] Submit sitemap: `https://YOUR_DOMAIN/sitemap.xml`
- [ ] Request indexing for homepage (all 3 locales)
- [ ] Request indexing for all 20 calculator pages (all 3 locales)
- [ ] Request indexing for key static pages (pricing, wizard, compare, blog, tools)
- [ ] Monitor indexing status daily for the first week

### Phase 7: Final Verification

- [ ] Visit production URL and verify all pages load
- [ ] Test sign up / sign in flow
- [ ] Test license key activation flow
- [ ] Test AI interpretation (Pro)
- [ ] Test Word export (Pro)
- [ ] Verify ads show for free users, hidden for Pro users
- [ ] Verify Google Analytics receives events
- [ ] Check Google Search Console for indexing progress
- [ ] Test all 3 locales (EN, KO, JA)

---

## Troubleshooting

### Supabase auth not working

- Verify both `NEXT_PUBLIC_SUPABASE_URL` and `NEXT_PUBLIC_SUPABASE_ANON_KEY` are set in Vercel.
- Check that the Site URL in Supabase Authentication settings matches your domain.
- Ensure redirect URLs include your domain with a wildcard pattern (`https://YOUR_DOMAIN/**`).

### License activation returns 503

- The `LEMONSQUEEZY_API_KEY` environment variable is not set. Add it to Vercel and redeploy.

### AI interpretation returns 503

- The `ANTHROPIC_API_KEY` environment variable is not set. Add it to Vercel and redeploy.

### Ads not showing

- AdSense may take time to serve ads to new sites. Check the AdSense dashboard for policy violations.
- Ensure `NEXT_PUBLIC_ADSENSE_ID` is set correctly.
- Ads are intentionally hidden for Pro users (`useIsPro()` check in `components/adsense.tsx`).

### Pages not getting indexed

- Ensure `robots.txt` allows all crawlers (`Allow: /`).
- Verify the sitemap URL in `robots.txt` matches your actual domain.
- Use URL Inspection in GSC to diagnose specific pages.
- New sites typically take 1--4 weeks for initial indexing.
